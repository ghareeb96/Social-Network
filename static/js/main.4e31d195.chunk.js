(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{35:function(e,t,s){},36:function(e,t,s){},40:function(e,t,s){},45:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){"use strict";s.r(t);var c=s(2),a=s(3),n=s.n(a),i=s(26),r=s.n(i),o=(s(35),s(5)),l=(s(36),s(17)),j=s(9),d=s(28).a.initializeApp({apiKey:"AIzaSyAltR2gyRBkILBgMEQVa3QT6LI9bUjxUCU",authDomain:"react-social-network-4762c.firebaseapp.com",databaseURL:"https://react-social-network-4762c-default-rtdb.firebaseio.com",projectId:"react-social-network-4762c",storageBucket:"react-social-network-4762c.appspot.com",messagingSenderId:"604842802759",appId:"1:604842802759:web:de11221667256e472bbb62"}),u=s(49),b=(s(40),function(e){var t=Object(a.useState)("container"),s=Object(o.a)(t,2),n=s[0],i=s[1];return Object(a.useEffect)((function(){u.a.to(".container",1,{ease:"easeInOut",css:{opacity:1,translateY:"0"}})})),e.loggedUser?Object(c.jsx)(j.a,{to:"/Home"}):Object(c.jsx)("div",{className:"reg-log",children:Object(c.jsxs)("div",{className:n,children:[Object(c.jsx)("div",{className:"form-container sign-up-container",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("h1",{children:"Create New Account"}),Object(c.jsx)("span",{children:"Please, Use a valid E-mail for registration"}),Object(c.jsx)("input",{onChange:function(t){return e.setName(t.target.value)},type:"text",placeholder:"Name",value:e.name,required:!0}),Object(c.jsx)("input",{onChange:function(t){return e.setEmail(t.target.value)},type:"email",placeholder:"Email",value:e.email,required:!0}),Object(c.jsx)("p",{className:"error",children:e.emailError}),Object(c.jsx)("input",{onChange:function(t){return e.setPassword(t.target.value)},type:"password",placeholder:"Password",required:!0,value:e.password}),Object(c.jsx)("p",{className:"error",children:e.passwordError}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),e.handleSignUp()},children:"Sign Up"})]})}),Object(c.jsx)("div",{className:"form-container sign-in-container",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("h1",{children:"Sign In"}),Object(c.jsx)("span",{children:"Use your Email"}),Object(c.jsx)("input",{onChange:function(t){return e.setEmail(t.target.value)},type:"email",placeholder:"Email",value:e.email,required:!0,autoFocus:!0}),Object(c.jsx)("p",{className:"error",children:e.emailError}),Object(c.jsx)("input",{onChange:function(t){return e.setPassword(t.target.value)},type:"password",placeholder:"Password",required:!0,value:e.password}),Object(c.jsx)("p",{className:"error",children:e.passwordError}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),e.handleLogin()},children:"Sign In"})]})}),Object(c.jsx)("div",{className:"overlay-container",children:Object(c.jsxs)("div",{className:"overlay",children:[Object(c.jsxs)("div",{className:"overlay-panel overlay-left",children:[Object(c.jsx)("h1",{children:"Already Have an Account ?"}),Object(c.jsx)("p",{children:"Sign in now"}),Object(c.jsx)("button",{onClick:function(){e.clearErrors(),e.clearInput(),i("container")},className:"ghost",id:"signIn",children:"Sign In"})]}),Object(c.jsxs)("div",{className:"overlay-panel overlay-right",children:[Object(c.jsx)("h1",{children:"Hello Friend !"}),Object(c.jsx)("p",{children:"Sign up and Start the Journey with Us"}),Object(c.jsx)("button",{onClick:function(){e.clearErrors(),e.clearInput(),i("container right-panel-active")},className:"ghost",id:"signUp",children:"Sign Up"})]})]})})]})})}),m=(s(45),function(e){var t=Object(a.useState)([]),s=Object(o.a)(t,2),n=s[0],i=s[1],r=Object(a.useState)(""),l=Object(o.a)(r,2),j=l[0],d=l[1],b=Object(a.useState)(!1),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(a.useState)(!0),p=Object(o.a)(f,2),x=p[0],g=p[1];return Object(a.useEffect)((function(){if(e.posts){for(var t=[],s=0,c=Object.entries(e.posts);s<c.length;s++){var a=Object(o.a)(c[s],2),n=a[0],r=a[1],l={id:n,body:r.body,date:r.date};t.push(l)}t.reverse(),i(t)}else i([])}),[e.posts]),Object(a.useEffect)((function(){if(0!==n.length&&x)u.a.fromTo(".post-container",{css:{opacity:0,x:100}},{css:{opacity:1,x:0},duration:1,yoyo:!0,stagger:.2}),g(!1);else if(0!==n.length&&!x){var e=document.querySelectorAll(".post-container")[0];u.a.fromTo(e,{css:{opacity:0,x:100}},{css:{opacity:1,x:0},duration:1,yoyo:!0,stagger:.2})}}),[n]),Object(a.useEffect)((function(){h&&u.a.from(".modal",.3,{scale:0})}),[h]),Object(c.jsx)("div",{className:"posts",children:n?n.map((function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:h?"modal-container open":"modal-container",onClick:function(e){e.target.classList.contains("modal-container")&&O(!1)},children:Object(c.jsxs)("div",{className:"modal",children:[Object(c.jsx)("div",{className:"text",children:Object(c.jsx)("textarea",{onChange:function(e){return d(e.target.value)},cols:"30",rows:"10",defaultValue:t.body})}),Object(c.jsx)("div",{className:"btns",children:Object(c.jsx)("button",{onClick:function(){e.editPost(t.id,j),O(!1),d("")},children:"Done"})})]})}),Object(c.jsxs)("div",{className:"post-container",children:[Object(c.jsx)("div",{className:"post-image",children:Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:e.image,alt:"Picture"})})}),Object(c.jsxs)("div",{className:"post",children:[Object(c.jsx)("div",{className:"post-body",children:Object(c.jsx)("p",{children:t.body})}),Object(c.jsxs)("div",{className:"post-footer",children:[Object(c.jsxs)("div",{className:"post-time",children:[" ",Object(c.jsxs)("p",{children:[" ",t.date]})]}),e.viewIcons?Object(c.jsxs)("div",{className:"post-btns",children:[Object(c.jsx)("button",{className:"Edit",onClick:function(){O(!0)},children:Object(c.jsx)("i",{className:"far fa-edit"})}),Object(c.jsx)("button",{className:"delete",onClick:function(){e.deletePost(t.id)},children:Object(c.jsx)("i",{className:"far fa-trash-alt"})})]}):""]})]})]},t.id)]})})):Object(c.jsx)(c.Fragment,{children:" "})})}),h=s.p+"static/media/bg.0baf09be.jpg",O=(s(46),function(e){var t=Object(a.useState)(!1),s=Object(o.a)(t,2),n=s[0],i=s[1];return Object(a.useEffect)((function(){if(e.isFirstLogin&&(e.database.child("users").push(e.initUser),e.setFirstLogin(!1)),!n&&!e.isFirstLogin){!function(){if(e.users)for(var t=0,s=Object.entries(e.users);t<s.length;t++){var c=Object(o.a)(s[t],2),a=c[0],n=c[1];n.email===e.loggedUser.email&&(e.setCurrentUser(n),e.setUserKey(a),i(!0))}}()}}),[e]),e.loggedUser?Object(c.jsxs)("div",{className:"home",children:[Object(c.jsx)("img",{src:h,alt:"bg",className:"bg"}),e.currentUser?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:e.currentUser.profilePic,alt:"PP"})})}),Object(c.jsxs)("div",{className:"name",children:[Object(c.jsx)("h1",{children:e.currentUser.name}),Object(c.jsxs)("div",{className:"file-input",children:[Object(c.jsx)("input",{type:"file",id:"myfile",accept:"image/*",className:"myfile",onChange:function(t){t.target.files[0]&&e.setImage(t.target.files[0])}}),Object(c.jsxs)("label",{htmlFor:"myfile",children:[" ",Object(c.jsx)("i",{className:"fas fa-image"})," Change Profile Picture"]})]})]}),Object(c.jsx)("div",{className:"btn",children:Object(c.jsxs)("button",{onClick:e.handleLogout,className:"logout",children:["Sign-Out ",Object(c.jsx)("i",{className:"fas fa-sign-out-alt"})]})})]}),Object(c.jsxs)("div",{className:"main",children:[Object(c.jsxs)("div",{className:"timeline",children:[Object(c.jsxs)("div",{className:"post-input",children:[Object(c.jsx)("div",{className:"post-text",children:Object(c.jsx)("textarea",{placeholder:"Post something Useful",cols:"50",rows:"6",name:"newPost",value:e.postText,onChange:function(t){return e.setPostText(t.target.value)}})}),Object(c.jsx)("button",{className:"add",onClick:function(){e.addPost()},children:"Post"})]}),Object(c.jsx)("div",{className:"posts-container",children:Object(c.jsx)(m,{posts:e.currentUser.posts,deletePost:function(t){window.confirm("Are you sure you want to delete this post ?")&&e.database.child("users/".concat(e.userKey,"/posts/").concat(t)).remove((function(e){e&&console.log(e)}))},editPost:function(t,s){s.trim()?e.database.child("users/".concat(e.userKey,"/posts/").concat(t)).update({body:s}):alert("Please, either edit the Post, or delete it .")},image:e.currentUser.profilePic,viewIcons:!0})})]}),Object(c.jsxs)("div",{className:"users",children:[Object(c.jsx)("h3",{children:"People you may know"}),e.users?Object.entries(e.users).filter((function(t){return t[1].email!==e.currentUser.email})).map((function(t){return Object(c.jsxs)("div",{className:"user",children:[Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:t[1].profilePic,alt:"PP"})}),Object(c.jsx)("div",{className:"userName",children:Object(c.jsx)(l.b,{to:{pathname:"/users/".concat(t[0]),state:{users:e.users,mainUser:e.currentUser}},children:t[1].name},t[0])})]})})):""]})]})]}):""]}):Object(c.jsx)(j.a,{to:"/"})}),f=(s(47),function(e){var t=Object(a.useState)(null),s=Object(o.a)(t,2),n=s[0],i=s[1],r=Object(a.useState)(null),l=Object(o.a)(r,2),d=(l[0],l[1]),u=Object(a.useState)(!1),b=Object(o.a)(u,2),h=b[0],O=b[1];return Object(a.useEffect)((function(){d(e.location.state.users),Object.entries(e.location.state.users).map((function(t){t[0]===e.match.params.id&&i(t[1])}))})),n?Object(c.jsxs)("div",{className:"user",children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:n.profilePic,alt:"PP"})})}),Object(c.jsx)("div",{className:"name",children:Object(c.jsx)("h1",{children:n.name})}),Object(c.jsx)("div",{className:"btn",children:Object(c.jsxs)("button",{onClick:function(){O(!0),i(null)},children:["Home ",Object(c.jsx)("i",{className:"fas fa-home"})]})})]}),Object(c.jsx)("div",{className:"main",children:Object(c.jsx)("div",{className:"timeline",children:Object(c.jsx)("div",{className:"posts-container",children:Object(c.jsx)(m,{posts:n.posts,image:n.profilePic,viewIcons:!1})})})})]}):h?Object(c.jsx)(j.a,{to:"/Home"}):Object(c.jsx)(c.Fragment,{})});var p=function(){var e=d.database().ref(),t=d.storage(),s=Object(a.useState)(null),n=Object(o.a)(s,2),i=n[0],r=n[1],u=Object(a.useState)({}),m=Object(o.a)(u,2),h=m[0],p=m[1],x=Object(a.useState)({}),g=Object(o.a)(x,2),v=g[0],N=g[1],y=Object(a.useState)(""),w=Object(o.a)(y,2),S=w[0],P=w[1],U=Object(a.useState)([]),E=Object(o.a)(U,2),C=E[0],k=E[1],I=Object(a.useState)(""),L=Object(o.a)(I,2),F=L[0],A=L[1],T=Object(a.useState)(!1),D=Object(o.a)(T,2),q=D[0],H=D[1],K=Object(a.useState)(""),B=Object(o.a)(K,2),R=B[0],J=B[1],_=Object(a.useState)(""),z=Object(o.a)(_,2),M=z[0],Q=z[1],V=Object(a.useState)(""),W=Object(o.a)(V,2),Y=W[0],G=W[1],X=Object(a.useState)(""),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(""),se=Object(o.a)(te,2),ce=se[0],ae=se[1],ne=Object(a.useState)(""),ie=Object(o.a)(ne,2),re=ie[0],oe=ie[1],le=function(){J(""),Q(""),G("")},je=function(){ee(""),ae("")};return Object(a.useEffect)((function(){e.child("users").on("value",(function(e){null!==e.val()&&k(e.val())})),d.auth().onAuthStateChanged((function(e){e?(le(),P(e)):P("")}))}),[]),Object(a.useEffect)((function(){if(null!==i){t.ref("images/".concat(S.email)).put(i).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){t.ref("images").child(S.email).getDownloadURL().then((function(t){e.child("users/".concat(F,"/profilePic")).set(t)}))}))}}),[i]),Object(a.useEffect)((function(){F&&e.child("users/".concat(F)).on("value",(function(e){p(e.val()),console.log(e.val())}))}),[F]),Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/Home",children:Object(c.jsx)(O,{initUser:v,setFirstLogin:H,database:e,isFirstLogin:q,handleLogout:function(){d.auth().signOut(),P("")},users:C,loggedUser:S,setUserKey:A,userKey:F,currentUser:h,setCurrentUser:p,addPost:function(){if(""!==re.trim()){var t=new Date;e.child("users/".concat(F,"/posts")).push({body:re,date:t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",weekday:"short",day:"numeric",month:"short",year:"numeric"})}),oe("")}},postText:re,setPostText:oe,setImage:r})}),Object(c.jsx)(j.b,{exact:!0,path:"/",children:Object(c.jsx)(b,{name:R,setName:J,email:M,setEmail:Q,loggedUser:S,password:Y,setPassword:G,handleLogin:function(){je(),H(!1),d.auth().signInWithEmailAndPassword(M,Y).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":ee(e.message);break;case"auth/wrong-password":ae(e.message)}}))},handleSignUp:function(){je(),H(!0),N({name:R,email:M,profilePic:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",posts:{}}),d.auth().createUserWithEmailAndPassword(M,Y).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/email-already-in-use":ee(e.message);break;case"auth/weak-password":ae(e.message)}}))},emailError:$,passwordError:ce,clearErrors:je,clearInput:le})}),Object(c.jsx)(j.b,{exact:!0,path:"/users/:id",component:f,users:C})]})})})},x=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,50)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),c(e),a(e),n(e),i(e)}))};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),x()}},[[48,1,2]]]);
//# sourceMappingURL=main.4e31d195.chunk.js.map